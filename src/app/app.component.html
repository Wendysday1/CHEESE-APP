<ion-app>
  <ion-menu contentId="main-content" menuId="main-menu" type="overlay">
    <ion-header class="ion-no-border">
      <div class="bg"></div>
      <ion-item lines="none">
        <ion-avatar slot="start">
          <img [src]="profile.avatar || 'assets/img/avatar.jpg'" />
        </ion-avatar>
        <ion-label color="light">
          {{ profile.name }}
          <p><ion-text color="light">{{ profile.email }}</ion-text></p>
        </ion-label>
      </ion-item>
    </ion-header>

    <ion-content *ngIf="isLoaded">
      <!-- Guest menu -->
      <ng-container *ngIf="profile.name === 'Guest'; else loggedInMenu">
        <ion-menu-toggle>
          <ion-item routerLink="/login" lines="none" button>
            <ion-label>Login</ion-label>
          </ion-item>
        </ion-menu-toggle>
        <ion-menu-toggle>
          <ion-item routerLink="/register" lines="none" button>
            <ion-label>Register</ion-label>
          </ion-item>
        </ion-menu-toggle>
      </ng-container>

      <!-- Logged-in menu -->
      <ng-template #loggedInMenu>
        <ion-list>
          <ion-menu-toggle *ngFor="let page of pages">
            <ion-item
              [routerLink]="page.url"
              routerDirection="root"
              lines="none"
              class="ion-padding-start"
              [ngClass]="{ 'selected': page.active }"
              (click)="setActive(page)">
              <ion-icon slot="start" [ios]="page.icon + '-outline'" [md]="page.icon + '-sharp'"></ion-icon>
              <ion-label>{{ page.title }}</ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
      </ng-template>
    </ion-content>
  </ion-menu>

  <ion-router-outlet id="main-content"></ion-router-outlet>
</ion-app>
